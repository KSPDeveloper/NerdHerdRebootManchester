import { logger, colors } from '@storybook/node-logger';

var n=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,o)=>(typeof require<"u"?require:t)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var y=e=>typeof e!="string"&&e.test instanceof RegExp&&e.test.test("test.css"),f=e=>({loader:n.resolve("style-loader")}),m=({cssModules:e,postCss:t})=>{let o=t?{importLoaders:1}:{},s=e?{modules:{auto:!0}}:{};return {loader:n.resolve("css-loader"),options:{...o,...s}}},S=({postCss:e})=>{let t=typeof e=="object"?{...e}:{};return {loader:n.resolve("postcss-loader"),options:{...t}}},b=/\.css$/,g=e=>{if(e.cssBuildRule)return e.cssBuildRule;let t=[f(),m(e),...e.postCss?[S(e)]:[]];return {test:b,use:t,sideEffects:!0}},d=(e,t)=>{if(!t.postCss&&!t.cssModules&&!t.cssBuildRule)return;let o=e.module?.rules,s=g(t),i=o?.findIndex(y);i===-1?o?.push(s):o[i]=s;};var R=e=>typeof e!="string"&&e.test instanceof RegExp&&(e.test.test("test.scss")||e.test.test("test.sass")),O=e=>({loader:n.resolve("style-loader")}),w=({cssModules:e,postCss:t})=>{let o={importLoaders:t?3:2},s=e?{modules:{auto:!0}}:{};return {loader:n.resolve("css-loader"),options:{...o,...s}}},A=({postCss:e})=>{let t=typeof e=="object"?{...e}:{};return {loader:n.resolve("postcss-loader"),options:{...t}}},k=e=>({loader:n.resolve("resolve-url-loader")}),C=({sass:e})=>{let t=typeof e=="object"?{sassOptions:e}:{},o=typeof e=="object"&&e.hasOwnProperty("implementation")?{implementation:e.implementation}:{},s=typeof e=="object"&&(e.hasOwnProperty("prependData")||e.hasOwnProperty("additionalData"))?{additionalData:e.prependData||e.additionalData}:{};return {loader:n.resolve("sass-loader"),options:{sourceMap:!0,...t,...o,...s}}},L=/\.s[ac]ss$/,v=e=>{if(e.scssBuildRule)return e.scssBuildRule;let t=[O(),w(e),...e.postCss?[A(e)]:[],k(),C(e)];return {test:L,use:t,sideEffects:!0}},u=(e,t)=>{if(!t.sass&&!t.scssBuildRule)return;let o=e.module?.rules,s=v(t),i=o?.findIndex(R);i===-1?o?.push(s):o[i]=s;};var h=e=>typeof e!="string"&&e.test instanceof RegExp&&e.test.test("test.less"),E=e=>({loader:n.resolve("style-loader")}),x=({cssModules:e,postCss:t})=>{let o={importLoaders:t?2:1},s=e?{modules:{auto:!0}}:{};return {loader:n.resolve("css-loader"),options:{...o,...s}}},B=({postCss:e})=>{let t=typeof e=="object"?{...e}:{};return {loader:n.resolve("postcss-loader"),options:{...t}}},q=({less:e})=>{let t=typeof e=="object"&&e.hasOwnProperty("implementation")?{implementation:e.implementation}:{},o=typeof e=="object"&&e.hasOwnProperty("additionalData")?{additionalData:e.additionalData}:{};return {loader:n.resolve("less-loader"),options:{sourceMap:!0,lessOptions:e.lessOptions??{},...t,...o}}},F=/\.less$/i,D=e=>{if(e.scssBuildRule)return e.scssBuildRule;let t=[E(),x(e),...e.postCss?[B(e)]:[],q(e)];return {test:F,use:t,sideEffects:!0}},a=(e,t)=>{if(!t.less&&!t.lessBuildRule)return;let o=e.module?.rules,s=D(t),i=o?.findIndex(h);i===-1?o?.push(s):o[i]=s;};function p(e,t={}){return d(e,t),u(e,t),a(e,t),e}function c(e,t={}){return t.cssModules&&logger.warn(`[@storybook/addon-styling] "${colors.blue("options.cssModules")}" is for webpack only. Vite comes preconfigured with css-module support.`),t.cssBuildRule&&logger.warn(`[@storybook/addon-styling] "${colors.blue("options.cssBuildRule")}" is for webpack only. To customize your CSS build, update your Vite config.`),t.postCss&&logger.warn(`[@storybook/addon-styling] "${colors.blue("options.postCss")}" is for webpack only. Vite comes preconfigured with PostCSS support.`),t.sass&&logger.warn(`[@storybook/addon-styling] "${colors.blue("options.sass")}" is for webpack only. Vite comes preconfigured with Sass/Scss support.`),t.scssBuildRule&&logger.warn(`[@storybook/addon-styling] "${colors.blue("options.scssBuildRule")}" is for webpack only. Vite comes preconfigured with Sass/Scss support.`),t.less&&logger.warn(`[@storybook/addon-styling] "${colors.blue("options.less")}" is for webpack only. Vite comes preconfigured with Less support.`),t.lessBuildRule&&logger.warn(`[@storybook/addon-styling] "${colors.blue("options.lessBuildRule")}" is for webpack only. Vite comes preconfigured with Less support.`),e}var K=p,N=c;

export { N as viteFinal, K as webpackFinal };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=preset.mjs.map